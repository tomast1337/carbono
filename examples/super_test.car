programa "SuperCarbonoSystem" {
    // ==========================================
    // 1. Struct Definitions (Data Layout)
    // ==========================================
    estrutura Vector2 {
        x: inteiro32
        y: inteiro32
    }

    estrutura Player {
        id: inteiro32
        hp: real32
        active: booleano // 1 or 0
    }

    escreval("=== INICIANDO SISTEMA CARBONO v1.0 ===");

    // ==========================================
    // 2. Struct Instantiation & Property Access
    // ==========================================
    var hero: Player;
    hero.id = 1;
    hero.hp = 100.0r;
    hero.active = 1;

    var pos: Vector2;
    pos.x = 10;
    pos.y = 20;

    escreval("Hero #${hero.id} spawned at [${pos.x}, ${pos.y}] with HP: ${hero.hp:.1f}");

    // ==========================================
    // 3. Dynamic Arrays & Methods (.push, .len)
    // ==========================================
    var inventory: [texto] = ["Sword", "Shield"];
    
    escreval("Initial Inventory: ${inventory.len} items");
    inventory.push("Potion");
    inventory.push("Map");
    
    var last_item: texto = inventory[inventory.len - 1];
    escreval("Looted: ${last_item}. Total items: ${inventory.len}");

    // ==========================================
    // 4. Matrix (Nested Arrays) - The Game Map
    // ==========================================
    // 0 = Empty, 1 = Wall, 9 = Goal
    var map: [[inteiro32]] = [
        [1, 1, 1, 1, 1],
        [1, 0, 0, 0, 1],
        [1, 0, 9, 0, 1],
        [1, 1, 1, 1, 1]
    ];

    escreval("--- RENDERING MAP ---");
    
    // Nested Loops (Cada) accessing Matrix
    cada (row : 0 .. map.len) {
        var line_str: texto = "";
        
        // We can access properties of nested arrays
        var current_row_len: inteiro32 = map[row].len;

        cada (col : 0 .. current_row_len) {
            var cell: inteiro32 = map[row][col];
            
            // Logic Control (Se/Senao)
            se (cell == 1) {
                line_str = line_str + "# ";
            } 
            se (cell == 0) {
                line_str = line_str + ". ";
            }
            se (cell == 9) {
                line_str = line_str + "X ";
            }
        }
        escreval(line_str);
    }

    // ==========================================
    // 5. Algorithms: Sorting High Scores
    // ==========================================
    escreval("--- PROCESSING SCORES ---");
    
    var scores: [inteiro32] = [450, 120, 980, 320, 500];
    
    // Bubble Sort Implementation
    var n: inteiro32 = scores.len;
    
    cada (i : 0 .. n) {
        var limit: inteiro32 = n - 1;
        limit = limit - i;
        
        cada (j : 0 .. limit) {
            se (scores[j] > scores[j+1]) {
                // Swap logic
                var temp: inteiro32 = scores[j];
                scores[j] = scores[j+1];
                scores[j+1] = temp;
            }
        }
    }

    // Output formatted sorted list
    escreval("Leaderboard (Sorted):");
    cada (i : 0 .. n) {
        // String Interpolation with Math inside
        var rank: inteiro32 = i + 1;
        escreval("Rank #${rank}: ${scores[i]} pts");
    }

    // ==========================================
    // 6. Input & Control Flow (Enquanto/Parar)
    // ==========================================
    escreval("--- SYSTEM CHECK ---");
    
    var countdown: inteiro32 = 3;
    enquanto (countdown > 0) {
        escreval("Shutting down in... ${countdown}");
        countdown = countdown - 1;
        
        // Break condition
        se (countdown == 0) {
            escreval("Bye!");
            parar;
        }
    }
}